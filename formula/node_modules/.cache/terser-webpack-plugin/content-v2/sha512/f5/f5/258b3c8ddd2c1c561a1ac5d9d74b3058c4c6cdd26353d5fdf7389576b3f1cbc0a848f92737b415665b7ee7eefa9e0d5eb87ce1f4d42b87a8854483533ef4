{"code":"!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){n(1),function(){var t=new Error(\"Cannot find module '/scss/main.scss'\");throw t.code=\"MODULE_NOT_FOUND\",t}()},function(t,e,n){n(2)},function(t,e){const n=[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],o={seasons:[]};function r(){if(Array.isArray(n)&&n.length>0){let t=document.getElementById(\"seasonsList\"),e=\"\";n.forEach(t=>{e+=`<li data-season=\"${t}\">${t}</li>`}),t.innerHTML=e,t.addEventListener(\"click\",()=>a(event,()=>(function(t,e=null,n){null===e&&(e=t.target.getAttribute(\"data-season\"));let r=`http://ergast.com/api/f1/${e}/results/1.json`;void 0===o.seasons[e]?function(t,e,n){const o=new XMLHttpRequest;let r={};o.onreadystatechange=(()=>{if(4==o.readyState&&200==o.status){try{r=JSON.parse(o.responseText)}catch(t){return void console.log(t.message+\" in \"+o.responseText)}n(r)}}),o.open(t,e,!0),o.send()}(\"GET\",r,t=>{let r=t.MRData.RaceTable.Races;n(r),o.seasons[e]=r,console.log(\"HTTP\")}):(n(o.seasons[e]),console.log(\"CACHE\"))})(event,null,s)),!1)}}function a(t,e){t.target!==t.currentTarget&&e(),t.stopPropagation()}function s(t){let e=document.getElementById(\"seasonRaces\"),n=\"S\"+t[0].season;html=`<table id=\"${n}\">`,favorites=localStorage.getObj(\"favorites\"),t.forEach(t=>{html+=c(t)}),html+=\"</table>\",e.innerHTML=html,document.getElementById(n).addEventListener(\"click\",()=>a(event,()=>(function(){let t=event.target.getAttribute(\"data-season\"),e=event.target.getAttribute(\"data-race\"),n=localStorage.getObj(\"favorites\");favoritesButton=\"-\",i(t,e)?(n[t].splice(n[t].indexOf(e),1),0==n[t].length&&delete n[t],favoritesButton=\"+\"):(n.hasOwnProperty(t)||(n[t]=[]),n[t].push(e));localStorage.setObj(\"favorites\",n),event.target.innerHTML=favoritesButton})(event)),!1)}function i(t,e){if(null===localStorage.getItem(\"favoritesExist\")){let t={};localStorage.setObj(\"favorites\",t),localStorage.setItem(\"favoritesExist\",\"yes\")}let n=localStorage.getObj(\"favorites\");return!(!n.hasOwnProperty(t)||-1===n[t].indexOf(e))}function l(){let t=localStorage.getObj(\"favorites\"),e=\"<table>\";Object.keys(t).forEach(n=>{let r=o.seasons[n];t[n].forEach(t=>{r.filter(n=>{n.round===t&&(e+=c(n))})})}),e+=\"</table>\",document.getElementById(\"racesFavorites\").innerHTML=e}function c(t){let e=i(t.season,t.round)?\"-\":\"+\";return html=`\\n                <tr>\\n                    <td>${t.round}</td>\\n                    <td>${t.raceName}</td>\\n                    <td>${t.date}</td>\\n                    <td>${t.Circuit.circuitName}</td>\\n                    <td>${t.Circuit.Location.locality}, ${t.Circuit.Location.country}</td>\\n                    <td>${t.Results[0].Driver.givenName} ${t.Results[0].Driver.familyName}</td>\\n                    <td>${t.Results[0].Constructor.name}</td>\\n                    <td><button class=\"add-fav\" data-season=\"${t.season}\" data-race=\"${t.round}\">${e}</button></td>\\n                </tr>`,html}window.onload=(()=>{r(),localStorage.clear(),Storage.prototype.setObj=function(t,e){return this.setItem(t,JSON.stringify(e))},Storage.prototype.getObj=function(t){return JSON.parse(this.getItem(t))},document.getElementById(\"showFavorites\").addEventListener(\"click\",l)})}]);","extractedComments":[]}